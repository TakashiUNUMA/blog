<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">

  
  <title>様々な国や地域の雨滴粒径分布の解析</title>
  
  <link rel="canonical" href="https://takashiunuma.github.io/blog/2025/06/11/">
  
  <meta name="description" content="はじめに 雨滴粒径分布は、大気中の単位体積内における雨滴の数濃度と粒径分布を記述する。これは、大気中のマイクロ波信号の伝播をモデル化（通信や気象レーダーの遠隔測定校正に不可欠）、数値気象予測モデルにおける微物理スキームの改善、および地表面プロセス（降雨の捕捉、土壌侵食）の理解に不可欠である。世界中の">
  
  
  <meta name="author" content="Takashi Unuma">
  
  
  
  <meta property="og:site_name" content="Takashi Unuma&#39;s Blog" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="様々な国や地域の雨滴粒径分布の解析" />
  
  <meta property="og:description" content="はじめに 雨滴粒径分布は、大気中の単位体積内における雨滴の数濃度と粒径分布を記述する。これは、大気中のマイクロ波信号の伝播をモデル化（通信や気象レーダーの遠隔測定校正に不可欠）、数値気象予測モデルにおける微物理スキームの改善、および地表面プロセス（降雨の捕捉、土壌侵食）の理解に不可欠である。世界中の">
  
  <meta property="og:url" content="https://takashiunuma.github.io/blog/2025/06/11/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="様々な国や地域の雨滴粒径分布の解析">
  
  <meta name="twitter:description" content="はじめに 雨滴粒径分布は、大気中の単位体積内における雨滴の数濃度と粒径分布を記述する。これは、大気中のマイクロ波信号の伝播をモデル化（通信や気象レーダーの遠隔測定校正に不可欠）、数値気象予測モデルにおける微物理スキームの改善、および地表面プロセス（降雨の捕捉、土壌侵食）の理解に不可欠である。世界中の">
  
  
  
  
  <meta name="twitter:url" content="https://takashiunuma.github.io/blog/2025/06/11/" />

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="preload" href="/blog/fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/blog/fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  
<link rel="stylesheet" href="/blog/css/normalize.css">

  
<link rel="stylesheet" href="/blog/css/skeleton.css">

  
<link rel="stylesheet" href="/blog/css/custom.css">

  
<link rel="stylesheet" href="/blog/css/prism-dark.css">

  
<link rel="stylesheet" href="/blog/css/prism-line-numbers.css">

  <!-- User css -->
  

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="/blog/images/favicon.ico">

  <!-- Custom Theme Color Style
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <style>
  a:not(.icon) {
    text-decoration-color: #0A6987;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #0A6987 50%
    );
  }
  blockquote {
    border-left: 8px solid #0A6987;
  }
  .nanobar .bar {
    background: #0A6987;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #0A6987;
    border-color: #0A6987;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #0A6987;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  

  
  <script src="/blog/js/pic.min.js" defer></script>
  

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/blog/atom.xml" title="Takashi Unuma's Blog" type="application/atom+xml">
<link rel="alternate" href="/blog/rss2.xml" title="Takashi Unuma's Blog" type="application/rss+xml">
</head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="ten columns ml-1">
    <h1 class="mt-2">
      Takashi Unuma&#39;s blog.
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/blog/">Home</a>
        
          
          <a href="/blog/about" class="ml">About</a>
          
        
          
          <a href="/blog/archives" class="ml">Archive</a>
          
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>

        <div class="trans">
            <h1>様々な国や地域の雨滴粒径分布の解析</h1>

  <h1>はじめに</h1>
<p>雨滴粒径分布は、大気中の単位体積内における雨滴の数濃度と粒径分布を記述する。これは、大気中のマイクロ波信号の伝播をモデル化（通信や気象レーダーの遠隔測定校正に不可欠）、数値気象予測モデルにおける微物理スキームの改善、および地表面プロセス（降雨の捕捉、土壌侵食）の理解に不可欠である。世界中の研究者は、雨滴粒径分布の時空間的な変動を理解するため、雨滴粒径分布を記録する装置の一つであるディスドロメーターを配備してきた。気象サービス・国家機関・大学研究グループなどにより、数多くの特別観測が実施されてきた。しかしながら、現状、それらのデータのほんの一部にしか容易にアクセスすることは出来ない。データは多様な形式で保存されており、それらの共有・解析・比較・再利用は、多くの場合困難となっている。加えて、雨滴粒径分布を処理するソフトウェアは極めて限られており、公開されているものはほとんど無い (私の知る限り、PyDSD ぐらい)。</p>
<p>近年、以上の課題に対応する具体として、<a target="_blank" rel="noopener" href="https://github.com/ltelab/disdrodb">DISDRODB</a> というソフトウェアの開発が GitHub 上で進められている。このソフトウェアは、近年進められているオープンサイエンスのベストプラクティスに従って、ディスドロメーターデータをダウンロード・解析・アーカイブするためのツールセットを提供する。DISDRODB の主な目的として、1. 世界中のディスドロメーターデータから分散型アーカイブを作成すること、2. 科学コミュニティ全体でのデータ交換を促進すること、3. 利用可能なデータとディスドロメーターセンサーの種類を文書化すること、4. ディスドロメーターデータを処理するための共通フレームワークを提供すること、5. 雨滴粒径分布の時空間的変動を全球規模で研究するための科学的な解析ツールを開発すること、6. 粒径分布モデルとそのアルゴリズムの開発・共有・改善を行うコミュニティを構築すること、が掲げられている。</p>
<p>今回は、この DISDRODB の利用方法を紹介する。</p>
<h1><a target="_blank" rel="noopener" href="https://github.com/ltelab/disdrodb">DISDRODB</a></h1>
<p>2025年6月11日現在、DISDRODB の最新バージョンは 0.1.2 である。この最新版を今回利用する。</p>
<p>まず、<a target="_blank" rel="noopener" href="https://disdrodb.readthedocs.io/en/latest/installation.html">ドキュメント</a> に従って、環境を構築する。その後、ソフトウェアをインストールする。使用した環境は<a href="/blog/2024/01/19/">Spectral-Bin-Microphysics-Model</a>で使用したものと同じ。今回は miniconda を用いた。具体的なコマンドは以下。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda create <span class="token parameter variable">--name</span> disdrodb --no-default-packages
conda activate disdrodb
conda <span class="token function">install</span> <span class="token parameter variable">-c</span> conda-forge disdrodb matplotlib
conda clean <span class="token parameter variable">-tp</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>次に、DISDRODB のアーカイブ保存ディレクトリとメタデータ格納ディレクトリをそれぞれ作成する。今回は、作業ディレクトリ直下に <code>data/</code> というディレクトリを作成し、その中に作成した。アーカイブ保存ディレクトリは空のディレクトリを作成するだけで良い。一方、メタデータについては、<a target="_blank" rel="noopener" href="https://github.com/ltelab/DISDRODB-METADATA">別の GitHub リポジトリ</a>を使用する。具体的なコマンドは下記。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> data/DISDRODB
<span class="token builtin class-name">cd</span> data/
<span class="token function">git</span> clone https://github.com/ltelab/DISDRODB-METADATA.git
<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>そして、下記の Python スクリプトを作成する。DISDRODB では、bash で実行用のコマンドラインインターフェースと Python (主に Jupyter notebook 等) 用の関数の二種が用意されている。私が試した限りでは、後者にバグがあり、出力される値が極端に小さくなってしまうようである。このため、前者のコマンドラインインターフェースを主として用いた (なので、Python スクリプト内で <code>subprocess.run</code> を用いている)。</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># coding: utf-8</span>

<span class="token comment"># Preparation</span>
<span class="token keyword">import</span> subprocess
<span class="token keyword">import</span> disdrodb
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"disdrodb: "</span><span class="token punctuation">,</span> disdrodb<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span>

<span class="token comment"># Define archive directories</span>
metadata_archive_dir <span class="token operator">=</span> <span class="token string">"data/DISDRODB-METADATA/DISDRODB"</span>
data_archive_dir <span class="token operator">=</span> <span class="token string">"data/DISDRODB"</span>
disdrodb<span class="token punctuation">.</span>define_configs<span class="token punctuation">(</span>metadata_archive_dir<span class="token operator">=</span>metadata_archive_dir<span class="token punctuation">,</span> data_archive_dir<span class="token operator">=</span>data_archive_dir<span class="token punctuation">)</span> <span class="token comment"># これは初回だけで良い。実行後、~/.config_disdrodb.yml が作成される。</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"DISDRODB Metadata Archive Directory: "</span><span class="token punctuation">,</span> disdrodb<span class="token punctuation">.</span>get_metadata_archive_dir<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"DISDRODB Data Archive Directory: "</span><span class="token punctuation">,</span> disdrodb<span class="token punctuation">.</span>get_data_archive_dir<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Check metadata</span>
disdrodb<span class="token punctuation">.</span>available_stations<span class="token punctuation">(</span>available_data<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
disdrodb<span class="token punctuation">.</span>check_metadata_archive<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># Define station arguments</span>
data_source <span class="token operator">=</span> <span class="token string">"EPFL"</span>
campaign_name <span class="token operator">=</span> <span class="token string">"HYMEX_LTE_SOP3"</span>
station_name <span class="token operator">=</span> <span class="token string">"10"</span>

<span class="token comment"># List all files</span>
filepaths <span class="token operator">=</span> disdrodb<span class="token punctuation">.</span>find_files<span class="token punctuation">(</span>
    product<span class="token operator">=</span><span class="token string">"RAW"</span><span class="token punctuation">,</span>
    data_source<span class="token operator">=</span>data_source<span class="token punctuation">,</span>
    campaign_name<span class="token operator">=</span>campaign_name<span class="token punctuation">,</span>
    station_name<span class="token operator">=</span>station_name<span class="token punctuation">,</span>
<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>filepaths<span class="token punctuation">)</span>

<span class="token comment"># Read metadata</span>
metadata <span class="token operator">=</span> disdrodb<span class="token punctuation">.</span>read_station_metadata<span class="token punctuation">(</span>
    metadata_archive_dir<span class="token operator">=</span>metadata_archive_dir<span class="token punctuation">,</span>
    data_source<span class="token operator">=</span>data_source<span class="token punctuation">,</span>
    campaign_name<span class="token operator">=</span>campaign_name<span class="token punctuation">,</span>
    station_name<span class="token operator">=</span>station_name<span class="token punctuation">,</span>
<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span>

<span class="token comment"># Generate DISDRODB L0 product</span>
subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"disdrodb_run_l0_station"</span><span class="token punctuation">,</span> data_source<span class="token punctuation">,</span> campaign_name<span class="token punctuation">,</span> station_name<span class="token punctuation">,</span> <span class="token string">"--force"</span><span class="token punctuation">,</span> <span class="token string">"True"</span><span class="token punctuation">,</span> <span class="token string">"--verbose"</span><span class="token punctuation">,</span> <span class="token string">"True"</span><span class="token punctuation">,</span> <span class="token string">"--parallel"</span><span class="token punctuation">,</span> <span class="token string">"False"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># Generate DISDRODB L1 product</span>
subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"disdrodb_run_l1_station"</span><span class="token punctuation">,</span> data_source<span class="token punctuation">,</span> campaign_name<span class="token punctuation">,</span> station_name<span class="token punctuation">,</span> <span class="token string">"--force"</span><span class="token punctuation">,</span> <span class="token string">"True"</span><span class="token punctuation">,</span> <span class="token string">"--verbose"</span><span class="token punctuation">,</span> <span class="token string">"True"</span><span class="token punctuation">,</span> <span class="token string">"--parallel"</span><span class="token punctuation">,</span> <span class="token string">"False"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># Generate DISDRODB L2 product</span>
subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"disdrodb_run_l2e_station"</span><span class="token punctuation">,</span> data_source<span class="token punctuation">,</span> campaign_name<span class="token punctuation">,</span> station_name<span class="token punctuation">,</span> <span class="token string">"--force"</span><span class="token punctuation">,</span> <span class="token string">"True"</span><span class="token punctuation">,</span> <span class="token string">"--verbose"</span><span class="token punctuation">,</span> <span class="token string">"True"</span><span class="token punctuation">,</span> <span class="token string">"--parallel"</span><span class="token punctuation">,</span> <span class="token string">"False"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"disdrodb_run_l2m_station"</span><span class="token punctuation">,</span> data_source<span class="token punctuation">,</span> campaign_name<span class="token punctuation">,</span> station_name<span class="token punctuation">,</span> <span class="token string">"--force"</span><span class="token punctuation">,</span> <span class="token string">"True"</span><span class="token punctuation">,</span> <span class="token string">"--verbose"</span><span class="token punctuation">,</span> <span class="token string">"True"</span><span class="token punctuation">,</span> <span class="token string">"--parallel"</span><span class="token punctuation">,</span> <span class="token string">"False"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>DISDRODB では、メタデータとデータ本体とが別々に管理される。メタデータは、国・観測プロジェクト名・サイト名の階層で管理され、地点の位置情報やデータの期間、測器の種類や読み込み方法、データの取得先等が記述される。詳細は<a target="_blank" rel="noopener" href="https://disdrodb.readthedocs.io/en/latest/metadata.html">こちら</a>を参照されたし。このメタデータに基づいて、データの位置情報や reader、データの期間・取得先等が機械的に定まるようになっている。今回は、公開されているスイスのデータを用いた。データ本体は、前述のメタデータに取得先が記述される。しかし、機関によってはデータを無条件で公開出来ない場合があり、その場合はメタデータの取得先が空欄になっている。メタデータとしてデータがあることは公開するけれども、実際にデータを使用する場合には、利用者が直接問い合わせてデータを取得する必要があるだろう。ただ、このデータの有無が分かるだけでも有益な情報となる。この点こそが、DISDRODB の目的の一つである。</p>
<p>出力されるプロダクトは、大きく分けて三種類ある。Level 0 (L0) プロダクト、Level 1 (L1) プロダクト、そして Level 2 (L2) プロダクトである。L0 プロダクトは、主に測器から出力されるオリジナルデータ (RAW データ) のフォーマットを整えるために作成される。DISDRODB で推奨される品質管理もこの L0 プロダクト作成時に実施される。最終的に L0C と呼ばれるプロダクトが生成され、後続の L1 プロダクトの作成に使用される。出力データのフォーマットは、CF 規約及び ACDD 規約に則った NetCDF である。L1 プロダクトは、L0 プロダクトで格納された粒径分布にフィルター処理を実施し、基本的な統計量を計算する。出力形式は、上記と同じ NetCDF。L2 プロダクトは、L1 プロダクトの粒径分布から各種粒径分布パラメーターを計算する。散乱計算によるレーダーパラメーターの計算モジュールも実装されているが、開発者によると Python 版 T-Matrix モジュールの修正中であり現在は利用不可とのことである。こちらも出力形式は上記と同じ NetCDF 形式である。</p>
<h1>可視化</h1>
<p>出力されたデータは xarray dataset として構造化されているので、そのデータ構造と共にデータを確認していく。</p>
<h2 id="L0-プロダクト">L0 プロダクト</h2>
<p>データ読み込み</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> disdrodb
ds <span class="token operator">=</span> disdrodb<span class="token punctuation">.</span>open_dataset<span class="token punctuation">(</span>
    product<span class="token operator">=</span><span class="token string">"L0C"</span><span class="token punctuation">,</span>
    <span class="token comment"># Station arguments</span>
    data_source<span class="token operator">=</span>data_source<span class="token punctuation">,</span>
    campaign_name<span class="token operator">=</span>campaign_name<span class="token punctuation">,</span>
    station_name<span class="token operator">=</span>station_name<span class="token punctuation">,</span>
<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ds<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>データ構造</p>
<pre class="line-numbers language-xarray" data-language="xarray"><code class="language-xarray">&lt;xarray.Dataset&gt; Size: 1GB
Dimensions:                         (time: 248960, diameter_bin_center: 32,
                                     velocity_bin_center: 32, crs: 1)
Coordinates: (12&#x2F;15)
  * diameter_bin_center             (diameter_bin_center) float64 256B 0.062 ...
    diameter_bin_lower              (diameter_bin_center) float64 256B dask.array&lt;chunksize&#x3D;(32,), meta&#x3D;np.ndarray&gt;
    diameter_bin_upper              (diameter_bin_center) float64 256B dask.array&lt;chunksize&#x3D;(32,), meta&#x3D;np.ndarray&gt;
    diameter_bin_width              (diameter_bin_center) float64 256B dask.array&lt;chunksize&#x3D;(32,), meta&#x3D;np.ndarray&gt;
  * velocity_bin_center             (velocity_bin_center) float64 256B 0.05 ....
    velocity_bin_lower              (velocity_bin_center) float64 256B dask.array&lt;chunksize&#x3D;(32,), meta&#x3D;np.ndarray&gt;
    ...                              ...
    longitude                       float64 8B 4.499
    altitude                        float64 8B 496.0
  * crs                             (crs) &lt;U5 20B &#39;WGS84&#39;
    sample_interval                 int64 8B 30
  * time                            (time) datetime64[ns] 2MB 2013-09-01 ... ...
    time_qc                         (time) float64 2MB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
Data variables: (12&#x2F;16)
    raw_drop_concentration          (time, diameter_bin_center) float32 32MB dask.array&lt;chunksize&#x3D;(2880, 32), meta&#x3D;np.ndarray&gt;
    raw_drop_average_velocity       (time, diameter_bin_center) float32 32MB dask.array&lt;chunksize&#x3D;(2880, 32), meta&#x3D;np.ndarray&gt;
    raw_drop_number                 (time, diameter_bin_center, velocity_bin_center) float32 1GB dask.array&lt;chunksize&#x3D;(2880, 32, 32), meta&#x3D;np.ndarray&gt;
    rainfall_rate_32bit             (time) float32 996kB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
    rainfall_accumulated_32bit      (time) float32 996kB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
    weather_code_synop_4680         (time) float32 996kB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
    ...                              ...
    number_particles                (time) float64 2MB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
    sensor_temperature              (time) float32 996kB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
    sensor_heating_current          (time) float32 996kB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
    sensor_battery_voltage          (time) float32 996kB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
    sensor_status                   (time) float32 996kB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
    rainfall_amount_absolute_32bit  (time) float32 996kB dask.array&lt;chunksize&#x3D;(2880,), meta&#x3D;np.ndarray&gt;
Attributes: (12&#x2F;62)
    data_source:                     EPFL
    campaign_name:                   HYMEX_LTE_SOP3
    station_name:                    10
    sensor_name:                     PARSIVEL
    reader:                          EPFL&#x2F;HYMEX_LTE_SOP3
    raw_data_glob_pattern:           *.dat.gz
    ...                              ...
    Conventions:                     CF-1.10, ACDD-1.3
    featureType:                     timeSeries
    disdrodb_processing_date:        2025-06-11 20:32:21
    disdrodb_product_version:        V0
    disdrodb_software_version:       V0.1.2
    disdrodb_product:                L0C<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>D-V 分布</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>colors <span class="token keyword">import</span> LogNorm

cmap <span class="token operator">=</span> plt<span class="token punctuation">.</span>get_cmap<span class="token punctuation">(</span><span class="token string">"cubehelix_r"</span><span class="token punctuation">)</span>
cmap<span class="token punctuation">.</span>set_under<span class="token punctuation">(</span>alpha<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
ds<span class="token punctuation">.</span>raw_drop_number<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token string">"time"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>pcolormesh<span class="token punctuation">(</span>
    x<span class="token operator">=</span><span class="token string">"diameter_bin_center"</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">"velocity_bin_center"</span><span class="token punctuation">,</span>
    cmap<span class="token operator">=</span>cmap<span class="token punctuation">,</span> norm<span class="token operator">=</span>LogNorm<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src="/blog/2025/06/11/vd_L0C.png" class="">
<h2 id="L1-プロダクト">L1 プロダクト</h2>
<p>データ読み込み</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> disdrodb
ds <span class="token operator">=</span> disdrodb<span class="token punctuation">.</span>open_dataset<span class="token punctuation">(</span>
    product<span class="token operator">=</span><span class="token string">"L1"</span><span class="token punctuation">,</span>
    <span class="token comment"># Station arguments</span>
    data_source<span class="token operator">=</span>data_source<span class="token punctuation">,</span>
    campaign_name<span class="token operator">=</span>campaign_name<span class="token punctuation">,</span>
    station_name<span class="token operator">=</span>station_name<span class="token punctuation">,</span>
<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ds<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>データ構造</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">&lt;</span>xarray<span class="token punctuation">.</span>Dataset<span class="token operator">></span> Size<span class="token punctuation">:</span> 1GB
Dimensions<span class="token punctuation">:</span>                    <span class="token punctuation">(</span>time<span class="token punctuation">:</span> <span class="token number">248960</span><span class="token punctuation">,</span> diameter_bin_center<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
                                velocity_bin_center<span class="token punctuation">:</span> <span class="token number">27</span><span class="token punctuation">)</span>
Coordinates<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">12</span><span class="token operator">/</span><span class="token number">14</span><span class="token punctuation">)</span>
    latitude                   float64 8B <span class="token number">44.61</span>
    longitude                  float64 8B <span class="token number">4.499</span>
    altitude                   float64 8B <span class="token number">496.0</span>
    sample_interval            int64 8B <span class="token number">30</span>
  <span class="token operator">*</span> diameter_bin_center        <span class="token punctuation">(</span>diameter_bin_center<span class="token punctuation">)</span> float64 184B <span class="token number">0.312</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">9.5</span>
    diameter_bin_lower         <span class="token punctuation">(</span>diameter_bin_center<span class="token punctuation">)</span> float64 184B dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                         <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token operator">*</span> velocity_bin_center        <span class="token punctuation">(</span>velocity_bin_center<span class="token punctuation">)</span> float64 216B <span class="token number">0.05</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">10.4</span>
    velocity_bin_lower         <span class="token punctuation">(</span>velocity_bin_center<span class="token punctuation">)</span> float64 216B dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    velocity_bin_upper         <span class="token punctuation">(</span>velocity_bin_center<span class="token punctuation">)</span> float64 216B dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    velocity_bin_width         <span class="token punctuation">(</span>velocity_bin_center<span class="token punctuation">)</span> float64 216B dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
  <span class="token operator">*</span> time                       <span class="token punctuation">(</span>time<span class="token punctuation">)</span> datetime64<span class="token punctuation">[</span>ns<span class="token punctuation">]</span> 2MB <span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">01</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    time_qc                    <span class="token punctuation">(</span>time<span class="token punctuation">)</span> float64 2MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
Data variables<span class="token punctuation">:</span>
    fall_velocity              <span class="token punctuation">(</span>time<span class="token punctuation">,</span> diameter_bin_center<span class="token punctuation">)</span> float64 46MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    drop_number                <span class="token punctuation">(</span>time<span class="token punctuation">,</span> diameter_bin_center<span class="token punctuation">,</span> velocity_bin_center<span class="token punctuation">)</span> float64 1GB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    drop_counts                <span class="token punctuation">(</span>time<span class="token punctuation">,</span> diameter_bin_center<span class="token punctuation">)</span> float64 46MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    Dmin                       <span class="token punctuation">(</span>time<span class="token punctuation">)</span> float64 2MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    Dmax                       <span class="token punctuation">(</span>time<span class="token punctuation">)</span> float64 2MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    N                          <span class="token punctuation">(</span>time<span class="token punctuation">)</span> float64 2MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    Nremoved                   <span class="token punctuation">(</span>time<span class="token punctuation">)</span> float64 2MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    Nbins                      <span class="token punctuation">(</span>time<span class="token punctuation">)</span> float32 996kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    Nbins_missing              <span class="token punctuation">(</span>time<span class="token punctuation">)</span> float64 2MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    Nbins_missing_fraction     <span class="token punctuation">(</span>time<span class="token punctuation">)</span> float64 2MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    Nbins_missing_consecutive  <span class="token punctuation">(</span>time<span class="token punctuation">)</span> float64 2MB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2880</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
Attributes<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">12</span><span class="token operator">/</span><span class="token number">62</span><span class="token punctuation">)</span>
    data_source<span class="token punctuation">:</span>                     EPFL
    campaign_name<span class="token punctuation">:</span>                   HYMEX_LTE_SOP3
    station_name<span class="token punctuation">:</span>                    <span class="token number">10</span>
    sensor_name<span class="token punctuation">:</span>                     PARSIVEL
    reader<span class="token punctuation">:</span>                          EPFL<span class="token operator">/</span>HYMEX_LTE_SOP3
    raw_data_glob_pattern<span class="token punctuation">:</span>           <span class="token operator">*</span><span class="token punctuation">.</span>dat<span class="token punctuation">.</span>gz
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                              <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    Conventions<span class="token punctuation">:</span>                     CF<span class="token operator">-</span><span class="token number">1.10</span><span class="token punctuation">,</span> ACDD<span class="token operator">-</span><span class="token number">1.3</span>
    featureType<span class="token punctuation">:</span>                     timeSeries
    disdrodb_processing_date<span class="token punctuation">:</span>        <span class="token number">2025</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">20</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">:</span><span class="token number">19</span>
    disdrodb_product_version<span class="token punctuation">:</span>        V0
    disdrodb_software_version<span class="token punctuation">:</span>       V0<span class="token punctuation">.</span><span class="token number">1.2</span>
    disdrodb_product<span class="token punctuation">:</span>                L1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>粒径と粒径の落下速度の二次元ヒストグラム</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>colors <span class="token keyword">import</span> LogNorm

cmap <span class="token operator">=</span> plt<span class="token punctuation">.</span>get_cmap<span class="token punctuation">(</span><span class="token string">"cubehelix_r"</span><span class="token punctuation">)</span>
cmap<span class="token punctuation">.</span>set_under<span class="token punctuation">(</span>alpha<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
ds<span class="token punctuation">.</span>raw_drop_number<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token string">"time"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>pcolormesh<span class="token punctuation">(</span>
    x<span class="token operator">=</span><span class="token string">"diameter_bin_center"</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">"velocity_bin_center"</span><span class="token punctuation">,</span>
    cmap<span class="token operator">=</span>cmap<span class="token punctuation">,</span> norm<span class="token operator">=</span>LogNorm<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src="/blog/2025/06/11/vd_L1.png" class="">
<h2 id="L2-プロダクト">L2 プロダクト</h2>
<p>データ読み込み</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> disdrodb
ds <span class="token operator">=</span> disdrodb<span class="token punctuation">.</span>open_dataset<span class="token punctuation">(</span>
    data_archive_dir<span class="token operator">=</span>data_archive_dir<span class="token punctuation">,</span>
    product<span class="token operator">=</span><span class="token string">"L2M"</span><span class="token punctuation">,</span>
    <span class="token comment"># Station arguments</span>
    data_source<span class="token operator">=</span>data_source<span class="token punctuation">,</span>
    campaign_name<span class="token operator">=</span>campaign_name<span class="token punctuation">,</span>
    station_name<span class="token operator">=</span>station_name<span class="token punctuation">,</span>
    <span class="token comment"># L2M product options</span>
    product_kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">"model_name"</span><span class="token punctuation">:</span> <span class="token string">"NGAMMA_GS_LOG_ND_MAE"</span><span class="token punctuation">,</span> <span class="token string">"sample_interval"</span><span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">"rolling"</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ds<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>データ構造</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">&lt;</span>xarray<span class="token punctuation">.</span>Dataset<span class="token operator">></span> Size<span class="token punctuation">:</span> 7MB
Dimensions<span class="token punctuation">:</span>                                <span class="token punctuation">(</span>time<span class="token punctuation">:</span> <span class="token number">15274</span><span class="token punctuation">,</span> velocity_method<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span>
Coordinates<span class="token punctuation">:</span>
    sample_interval                        int64 8B <span class="token number">60</span>
    latitude                               float64 8B <span class="token number">44.61</span>
    longitude                              float64 8B <span class="token number">4.499</span>
    altitude                               float64 8B <span class="token number">496.0</span>
  <span class="token operator">*</span> time                                   <span class="token punctuation">(</span>time<span class="token punctuation">)</span> datetime64<span class="token punctuation">[</span>ns<span class="token punctuation">]</span> 122kB <span class="token number">2013</span><span class="token operator">-</span><span class="token number">0.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token operator">*</span> velocity_method                        <span class="token punctuation">(</span>velocity_method<span class="token punctuation">)</span> <span class="token operator">&lt;</span>U17 136B 'fall_<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Data variables<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">12</span><span class="token operator">/</span><span class="token number">32</span><span class="token punctuation">)</span>
    Nt                                     <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float32 122kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    R                                      <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float64 244kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    P                                      <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float32 122kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    M0                                     <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float64 244kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    M1                                     <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float32 122kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    M2                                     <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float32 122kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                                     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    relative_max_error                     <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float64 244kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    total_number_concentration_difference  <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float64 244kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    kl_divergence                          <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float64 244kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    max_deviation                          <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float64 244kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    max_relative_deviation                 <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float64 244kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
    diameter_mode_deviation                <span class="token punctuation">(</span>time<span class="token punctuation">,</span> velocity_method<span class="token punctuation">)</span> float64 244kB dask<span class="token punctuation">.</span>array<span class="token operator">&lt;</span>chunksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> meta<span class="token operator">=</span>np<span class="token punctuation">.</span>ndarray<span class="token operator">></span>
Attributes<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">12</span><span class="token operator">/</span><span class="token number">64</span><span class="token punctuation">)</span>
    data_source<span class="token punctuation">:</span>                     EPFL
    campaign_name<span class="token punctuation">:</span>                   HYMEX_LTE_SOP3
    station_name<span class="token punctuation">:</span>                    <span class="token number">10</span>
    sensor_name<span class="token punctuation">:</span>                     PARSIVEL
    reader<span class="token punctuation">:</span>                          EPFL<span class="token operator">/</span>HYMEX_LTE_SOP3
    raw_data_glob_pattern<span class="token punctuation">:</span>           <span class="token operator">*</span><span class="token punctuation">.</span>dat<span class="token punctuation">.</span>gz
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                              <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    disdrodb_processing_date<span class="token punctuation">:</span>        <span class="token number">2025</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">20</span><span class="token punctuation">:</span><span class="token number">48</span><span class="token punctuation">:</span><span class="token number">45</span>
    disdrodb_product_version<span class="token punctuation">:</span>        V0
    disdrodb_software_version<span class="token punctuation">:</span>       V0<span class="token punctuation">.</span><span class="token number">1.2</span>
    disdrodb_product<span class="token punctuation">:</span>                L2M
    rolled<span class="token punctuation">:</span>                          <span class="token boolean">False</span>
    disdrodb_psd_model<span class="token punctuation">:</span>              NormalizedGammaPSD<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi mathvariant="normal">m</mi></msub></mrow><annotation encoding="application/x-tex">D_{\rm m}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">m</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi mathvariant="normal">w</mi></msub></mrow><annotation encoding="application/x-tex">N_{\rm w}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight" style="margin-right:0.01389em;">w</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 分布
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>colors <span class="token keyword">import</span> LogNorm

plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>ds<span class="token punctuation">.</span>Dm<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ds<span class="token punctuation">.</span>Nw<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token operator">=</span>ds<span class="token punctuation">.</span>R<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> norm<span class="token operator">=</span>LogNorm<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>plt<span class="token punctuation">.</span>get_cmap<span class="token punctuation">(</span><span class="token string">"cubehelix_r"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1000000</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'$D_\mathrm&#123;m&#125;$-$N_\mathrm&#123;w&#125;$ relation with $R$'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'$N_\mathrm&#123;w&#125;$ (mm$^&#123;-1&#125;$ m$^&#123;-3&#125;$)'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'$D_\mathrm&#123;m&#125;$ (mm)'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yscale<span class="token punctuation">(</span><span class="token string">'log'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>colorbar<span class="token punctuation">(</span>extend<span class="token operator">=</span><span class="token string">'max'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set_label<span class="token punctuation">(</span><span class="token string">'$R$ (mm hr$^&#123;-1&#125;$)'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>clim<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src="/blog/2025/06/11/dmnw_L2M.png" class="">
<h1>おわりに</h1>
<p>今回は、様々な国や地域の雨滴粒径分布を解析するオープンソースソフトウェアについて紹介した。</p>
<h1>参考文献</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://disdrodb.readthedocs.io/en/latest/index.html">DISDRODB</a></li>
</ul>
<h1>更新履歴</h1>
<ul>
<li>2025-06-11: 初稿</li>
</ul>

  <p><a class="classtest-link" href="/blog/tags/Miscellaneous/" rel="tag">Miscellaneous</a> — Jun 11, 2025</p>
  
  <hr>
<section id="comments" class="mt-2 mb-3">

  <div id="disqus_thread">
    <a href="#" class="button button-primary" onclick="loadDisqus();return false;">View / Make Comments</a>
  </div>

  <script>
    var disqus_config = function() {
      this.page.url = 'https://takashiunuma.github.io/blog/2025/06/11/index.html';
      this.page.identifier = '2025/06/11/index.html';
      this.page.title = '様々な国や地域の雨滴粒径分布の解析';
    };

    var is_disqus_loaded = false;

    function loadDisqus() {
      if (!is_disqus_loaded) {
        is_disqus_loaded = true;

        var d = document,
          s = d.createElement('script');
        s.src = 'https://unusblog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      }
    }

  </script>
  <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>



        </div>
        <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith">Made with ❤ and
        <a class="footer-link icon" href="https://hexo.io" target="_blank" style="text-decoration: none;" rel="noreferrer" aria-label="Hexo.io">
        <svg class="hexo svg-hov" width="14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Hexo.js</title><path d="M12 .007L1.57 6.056V18.05L12 23.995l10.43-6.049V5.952L12 .007zm4.798 17.105l-.939.521-.939-.521V12.94H9.08v4.172l-.94.521-.938-.521V6.89l.939-.521.939.521v4.172h5.84V6.89l.94-.521.938.521v10.222z"/></svg>
        </a>
        
        at <a href="https://scholar.google.co.jp/citations?user=8PamjYsAAAAJ" target="_blank" rel="noreferrer">Japan</a>.</p>
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/TakashiUNUMA" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      
      <a class="ml-0 footer-link icon" href="https://www.linkedin.com/in/takashiunuma/" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="LinkedIn">
        <svg class="linkedin svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
      </a>
      

      
      <a class="ml-0 footer-link icon" href="https://twitter.com/UNUSB" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="Twitter">
        <svg class="twitter svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>
      </a>
      

      
      <a class="ml-0 footer-link icon" href="https://www.instagram.com/unusb/" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="Instagram">
        <svg class="instagram svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>
      </a>
      

      

    </div>
  
</div>

      </div>

    </div>

  </div>
  <script src="/blog/js/nanobar.min.js"></script>

  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>
